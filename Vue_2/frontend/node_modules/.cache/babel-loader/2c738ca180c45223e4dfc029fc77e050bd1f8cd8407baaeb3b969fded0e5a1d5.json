{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      loading: true,\n      // 加载状态\n      favorites: [] // 收藏列表数据\n    };\n  },\n  created() {\n    // 页面加载时获取收藏列表\n    this.getFavorites();\n  },\n  mounted() {\n    // 实现鼠标悬停显示“取消收藏”按钮\n    const cards = document.querySelectorAll('.item-card');\n    cards.forEach(card => {\n      card.addEventListener('mouseenter', () => {\n        card.querySelector('button').style.display = 'flex';\n      });\n      card.addEventListener('mouseleave', () => {\n        card.querySelector('button').style.display = 'none';\n      });\n    });\n  },\n  methods: {\n    // 获取收藏列表\n    async getFavorites() {\n      try {\n        // 调用后端接口获取收藏列表\n        const response = await axios.get('/api/favorites');\n        if (response.data.ok) {\n          this.favorites = response.data.data;\n        } else {\n          alert(response.data.message || '获取收藏列表失败');\n        }\n      } catch (error) {\n        console.error('获取收藏列表失败:', error);\n        // 后端接口未实现时，用模拟数据显示\n        this.favorites = [{\n          id: 1,\n          title: '收藏的商品1',\n          price: 150,\n          imagePath: 'default.jpg',\n          status: 'available',\n          seller: {\n            username: '卖家A'\n          }\n        }, {\n          id: 2,\n          title: '收藏的商品2',\n          price: 300,\n          imagePath: '',\n          status: 'available',\n          seller: {\n            username: '卖家B'\n          }\n        }];\n      } finally {\n        this.loading = false;\n      }\n    },\n    // 取消收藏\n    async removeFavorite(itemId) {\n      if (!confirm('确定要取消收藏这个商品吗？')) {\n        return;\n      }\n      try {\n        // 调用后端接口取消收藏\n        const response = await axios.delete(`/api/favorites/${itemId}`);\n        if (response.data.ok) {\n          alert('取消收藏成功');\n          // 重新获取收藏列表\n          this.getFavorites();\n        } else {\n          alert(response.data.message || '取消收藏失败');\n        }\n      } catch (error) {\n        console.error('取消收藏失败:', error);\n        alert('网络错误，请稍后再试');\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","loading","favorites","created","getFavorites","mounted","cards","document","querySelectorAll","forEach","card","addEventListener","querySelector","style","display","methods","response","get","ok","alert","message","error","console","id","title","price","imagePath","status","seller","username","removeFavorite","itemId","confirm","delete"],"sources":["D:\\21626\\MyFiles\\files\\2025fall\\SE\\Vue_2\\frontend\\src\\views\\Favorites.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- 加载中提示 -->\n    <div v-if=\"loading\" class=\"text-center py-5\">\n      <div class=\"spinner-border text-primary\" role=\"status\">\n        <span class=\"visually-hidden\">Loading...</span>\n      </div>\n    </div>\n\n    <!-- 收藏列表标题 -->\n    <h2 class=\"my-4\">我的收藏</h2>\n\n    <!-- 没有收藏时显示 -->\n    <div v-if=\"!loading && favorites.length === 0\" class=\"text-center py-5\">\n      <p class=\"text-muted\">你还没有收藏任何商品</p>\n      <router-link to=\"/\" class=\"btn btn-primary\">去逛逛</router-link>\n    </div>\n\n    <!-- 收藏列表 -->\n    <div class=\"row\" v-if=\"!loading && favorites.length > 0\">\n      <div class=\"col-md-4 mb-4\" v-for=\"item in favorites\" :key=\"item.id\">\n        <div class=\"card item-card position-relative\">\n          <!-- 取消收藏按钮（悬浮显示） -->\n          <button \n            class=\"btn btn-danger rounded-circle position-absolute top-2 right-2\"\n            style=\"width: 30px; height: 30px; padding: 0; display: none;\"\n            @click.stop=\"removeFavorite(item.id)\"\n          >\n            <i class=\"bi bi-x\"></i>\n          </button>\n\n          <!-- 商品图片 -->\n          <img \n            :src=\"item.imagePath ? `/images/${item.imagePath}` : '/images/default.jpg'\" \n            class=\"card-img-top item-image\" \n            :alt=\"item.title\"\n          >\n          \n          <div class=\"card-body\">\n            <h5 class=\"card-title\">{{ item.title }}</h5>\n            <p class=\"card-text text-danger font-weight-bold\">¥{{ item.price }}</p>\n            <p class=\"card-text\">\n              <span class=\"badge\" :class=\"item.status === 'available' ? 'bg-success' : 'bg-secondary'\">\n                {{ item.status === 'available' ? '可交易' : '已售出' }}\n              </span>\n            </p>\n            <p class=\"card-text text-muted\" style=\"font-size: 0.9rem;\">\n              卖家：{{ item.seller.username }}\n            </p>\n            <router-link :to=\"`/item/${item.id}`\" class=\"btn btn-primary w-100\">查看详情</router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  data() {\n    return {\n      loading: true,       // 加载状态\n      favorites: []        // 收藏列表数据\n    }\n  },\n  created() {\n    // 页面加载时获取收藏列表\n    this.getFavorites();\n  },\n  mounted() {\n    // 实现鼠标悬停显示“取消收藏”按钮\n    const cards = document.querySelectorAll('.item-card');\n    cards.forEach(card => {\n      card.addEventListener('mouseenter', () => {\n        card.querySelector('button').style.display = 'flex';\n      });\n      card.addEventListener('mouseleave', () => {\n        card.querySelector('button').style.display = 'none';\n      });\n    });\n  },\n  methods: {\n    // 获取收藏列表\n    async getFavorites() {\n      try {\n        // 调用后端接口获取收藏列表\n        const response = await axios.get('/api/favorites');\n        if (response.data.ok) {\n          this.favorites = response.data.data;\n        } else {\n          alert(response.data.message || '获取收藏列表失败');\n        }\n      } catch (error) {\n        console.error('获取收藏列表失败:', error);\n        // 后端接口未实现时，用模拟数据显示\n        this.favorites = [\n          {\n            id: 1,\n            title: '收藏的商品1',\n            price: 150,\n            imagePath: 'default.jpg',\n            status: 'available',\n            seller: { username: '卖家A' }\n          },\n          {\n            id: 2,\n            title: '收藏的商品2',\n            price: 300,\n            imagePath: '',\n            status: 'available',\n            seller: { username: '卖家B' }\n          }\n        ];\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    // 取消收藏\n    async removeFavorite(itemId) {\n      if (!confirm('确定要取消收藏这个商品吗？')) {\n        return;\n      }\n\n      try {\n        // 调用后端接口取消收藏\n        const response = await axios.delete(`/api/favorites/${itemId}`);\n        if (response.data.ok) {\n          alert('取消收藏成功');\n          // 重新获取收藏列表\n          this.getFavorites();\n        } else {\n          alert(response.data.message || '取消收藏失败');\n        }\n      } catch (error) {\n        console.error('取消收藏失败:', error);\n        alert('网络错误，请稍后再试');\n      }\n    }\n  }\n}\n</script>\n\n<style>\n/* 取消收藏按钮样式优化 */\n.item-card button {\n  align-items: center;\n  justify-content: center;\n  opacity: 0.8;\n  z-index: 10;\n}\n.item-card button:hover {\n  opacity: 1;\n}\n</style>"],"mappings":"AA0DA,OAAOA,KAAI,MAAO,OAAM;AAExB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,IAAI;MAAQ;MACrBC,SAAS,EAAE,EAAC,CAAS;IACvB;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAACC,YAAY,CAAC,CAAC;EACrB,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR;IACA,MAAMC,KAAI,GAAIC,QAAQ,CAACC,gBAAgB,CAAC,YAAY,CAAC;IACrDF,KAAK,CAACG,OAAO,CAACC,IAAG,IAAK;MACpBA,IAAI,CAACC,gBAAgB,CAAC,YAAY,EAAE,MAAM;QACxCD,IAAI,CAACE,aAAa,CAAC,QAAQ,CAAC,CAACC,KAAK,CAACC,OAAM,GAAI,MAAM;MACrD,CAAC,CAAC;MACFJ,IAAI,CAACC,gBAAgB,CAAC,YAAY,EAAE,MAAM;QACxCD,IAAI,CAACE,aAAa,CAAC,QAAQ,CAAC,CAACC,KAAK,CAACC,OAAM,GAAI,MAAM;MACrD,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EACDC,OAAO,EAAE;IACP;IACA,MAAMX,YAAYA,CAAA,EAAG;MACnB,IAAI;QACF;QACA,MAAMY,QAAO,GAAI,MAAMjB,KAAK,CAACkB,GAAG,CAAC,gBAAgB,CAAC;QAClD,IAAID,QAAQ,CAAChB,IAAI,CAACkB,EAAE,EAAE;UACpB,IAAI,CAAChB,SAAQ,GAAIc,QAAQ,CAAChB,IAAI,CAACA,IAAI;QACrC,OAAO;UACLmB,KAAK,CAACH,QAAQ,CAAChB,IAAI,CAACoB,OAAM,IAAK,UAAU,CAAC;QAC5C;MACF,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;QACjC;QACA,IAAI,CAACnB,SAAQ,GAAI,CACf;UACEqB,EAAE,EAAE,CAAC;UACLC,KAAK,EAAE,QAAQ;UACfC,KAAK,EAAE,GAAG;UACVC,SAAS,EAAE,aAAa;UACxBC,MAAM,EAAE,WAAW;UACnBC,MAAM,EAAE;YAAEC,QAAQ,EAAE;UAAM;QAC5B,CAAC,EACD;UACEN,EAAE,EAAE,CAAC;UACLC,KAAK,EAAE,QAAQ;UACfC,KAAK,EAAE,GAAG;UACVC,SAAS,EAAE,EAAE;UACbC,MAAM,EAAE,WAAW;UACnBC,MAAM,EAAE;YAAEC,QAAQ,EAAE;UAAM;QAC5B,EACD;MACH,UAAU;QACR,IAAI,CAAC5B,OAAM,GAAI,KAAK;MACtB;IACF,CAAC;IAED;IACA,MAAM6B,cAAcA,CAACC,MAAM,EAAE;MAC3B,IAAI,CAACC,OAAO,CAAC,eAAe,CAAC,EAAE;QAC7B;MACF;MAEA,IAAI;QACF;QACA,MAAMhB,QAAO,GAAI,MAAMjB,KAAK,CAACkC,MAAM,CAAC,kBAAkBF,MAAM,EAAE,CAAC;QAC/D,IAAIf,QAAQ,CAAChB,IAAI,CAACkB,EAAE,EAAE;UACpBC,KAAK,CAAC,QAAQ,CAAC;UACf;UACA,IAAI,CAACf,YAAY,CAAC,CAAC;QACrB,OAAO;UACLe,KAAK,CAACH,QAAQ,CAAChB,IAAI,CAACoB,OAAM,IAAK,QAAQ,CAAC;QAC1C;MACF,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;QAC/BF,KAAK,CAAC,YAAY,CAAC;MACrB;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}