{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app\"\n};\nconst _hoisted_2 = {\n  class: \"navbar navbar-expand-lg navbar-light bg-light\"\n};\nconst _hoisted_3 = {\n  class: \"container\"\n};\nconst _hoisted_4 = {\n  class: \"collapse navbar-collapse\",\n  id: \"navbarNav\"\n};\nconst _hoisted_5 = {\n  class: \"navbar-nav mr-auto\"\n};\nconst _hoisted_6 = {\n  class: \"nav-item\"\n};\nconst _hoisted_7 = {\n  class: \"nav-item\"\n};\nconst _hoisted_8 = {\n  class: \"navbar-nav\"\n};\nconst _hoisted_9 = {\n  class: \"nav-item\"\n};\nconst _hoisted_10 = {\n  class: \"nav-item\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"nav-item dropdown\"\n};\nconst _hoisted_12 = {\n  class: \"nav-link dropdown-toggle\",\n  href: \"#\",\n  id: \"navbarDropdown\",\n  role: \"button\",\n  \"data-toggle\": \"dropdown\",\n  \"aria-haspopup\": \"true\",\n  \"aria-expanded\": \"false\"\n};\nconst _hoisted_13 = {\n  class: \"dropdown-menu\",\n  \"aria-labelledby\": \"navbarDropdown\"\n};\nconst _hoisted_14 = {\n  key: 1,\n  class: \"nav-item\"\n};\nconst _hoisted_15 = {\n  key: 2,\n  class: \"nav-item\"\n};\nconst _hoisted_16 = {\n  class: \"container mt-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 导航栏 \"), _createElementVNode(\"nav\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_router_link, {\n    to: \"/\",\n    class: \"navbar-brand\"\n  }, {\n    default: _withCtx(() => [...(_cache[1] || (_cache[1] = [_createTextVNode(\"校内二手市场\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"ul\", _hoisted_5, [_createElementVNode(\"li\", _hoisted_6, [_createVNode(_component_router_link, {\n    to: \"/\",\n    class: \"nav-link\"\n  }, {\n    default: _withCtx(() => [...(_cache[2] || (_cache[2] = [_createTextVNode(\"首页\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"li\", _hoisted_7, [_createVNode(_component_router_link, {\n    to: \"/publish\",\n    class: \"nav-link\"\n  }, {\n    default: _withCtx(() => [...(_cache[3] || (_cache[3] = [_createTextVNode(\"发布商品\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })])]), _createElementVNode(\"ul\", _hoisted_8, [_createElementVNode(\"li\", _hoisted_9, [_createVNode(_component_router_link, {\n    to: \"/favorites\",\n    class: \"nav-link\"\n  }, {\n    default: _withCtx(() => [...(_cache[4] || (_cache[4] = [_createElementVNode(\"i\", {\n      class: \"fas fa-heart\"\n    }, null, -1 /* CACHED */), _createTextVNode(\" 收藏 \", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"li\", _hoisted_10, [_createVNode(_component_router_link, {\n    to: \"/messages\",\n    class: \"nav-link\"\n  }, {\n    default: _withCtx(() => [...(_cache[5] || (_cache[5] = [_createElementVNode(\"i\", {\n      class: \"fas fa-comment\"\n    }, null, -1 /* CACHED */), _createTextVNode(\" 消息 \", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })]), $data.isLoggedIn ? (_openBlock(), _createElementBlock(\"li\", _hoisted_11, [_createElementVNode(\"a\", _hoisted_12, _toDisplayString($data.currentUser.username), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_13, [_createVNode(_component_router_link, {\n    to: \"/user-center\",\n    class: \"dropdown-item\"\n  }, {\n    default: _withCtx(() => [...(_cache[6] || (_cache[6] = [_createTextVNode(\"个人中心\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"a\", {\n    class: \"dropdown-item\",\n    href: \"#\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.logout && $options.logout(...args))\n  }, \"退出登录\")])])) : _createCommentVNode(\"v-if\", true), !$data.isLoggedIn ? (_openBlock(), _createElementBlock(\"li\", _hoisted_14, [_createVNode(_component_router_link, {\n    to: \"/login\",\n    class: \"nav-link\"\n  }, {\n    default: _withCtx(() => [...(_cache[7] || (_cache[7] = [_createTextVNode(\"登录\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), !$data.isLoggedIn ? (_openBlock(), _createElementBlock(\"li\", _hoisted_15, [_createVNode(_component_router_link, {\n    to: \"/register\",\n    class: \"nav-link\"\n  }, {\n    default: _withCtx(() => [...(_cache[8] || (_cache[8] = [_createTextVNode(\"注册\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true)])])])]), _createCommentVNode(\" 主要内容 \"), _createElementVNode(\"div\", _hoisted_16, [_createVNode(_component_router_view)]), _createCommentVNode(\" 页脚 \"), _cache[9] || (_cache[9] = _createElementVNode(\"footer\", {\n    class: \"bg-light py-3 mt-4\"\n  }, [_createElementVNode(\"div\", {\n    class: \"container text-center\"\n  }, [_createElementVNode(\"p\", {\n    class: \"mb-0\"\n  }, \"© 2023 校内二手市场. 保留所有权利.\")])], -1 /* CACHED */))]);\n}","map":{"version":3,"names":["id","class","href","role","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_router_link","to","_cache","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","$data","isLoggedIn","_hoisted_11","_hoisted_12","_toDisplayString","currentUser","username","_hoisted_13","onClick","args","$options","logout","_hoisted_14","_hoisted_15","_hoisted_16","_component_router_view"],"sources":["D:\\21626\\MyFiles\\files\\2025fall\\SE\\Vue_2\\frontend\\src\\App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <!-- 导航栏 -->\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n      <div class=\"container\">\n        <router-link to=\"/\" class=\"navbar-brand\">校内二手市场</router-link>\n        \n        <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n          <ul class=\"navbar-nav mr-auto\">\n            <li class=\"nav-item\">\n              <router-link to=\"/\" class=\"nav-link\">首页</router-link>\n            </li>\n            <li class=\"nav-item\">\n              <router-link to=\"/publish\" class=\"nav-link\">发布商品</router-link>\n            </li>\n          </ul>\n          \n          <ul class=\"navbar-nav\">\n            <li class=\"nav-item\">\n              <router-link to=\"/favorites\" class=\"nav-link\">\n                <i class=\"fas fa-heart\"></i> 收藏\n              </router-link>\n            </li>\n            <li class=\"nav-item\">\n              <router-link to=\"/messages\" class=\"nav-link\">\n                <i class=\"fas fa-comment\"></i> 消息\n              </router-link>\n            </li>\n            <li class=\"nav-item dropdown\" v-if=\"isLoggedIn\">\n              <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                {{ currentUser.username }}\n              </a>\n              <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\n                <router-link to=\"/user-center\" class=\"dropdown-item\">个人中心</router-link>\n                <a class=\"dropdown-item\" href=\"#\" @click=\"logout\">退出登录</a>\n              </div>\n            </li>\n            <li class=\"nav-item\" v-if=\"!isLoggedIn\">\n              <router-link to=\"/login\" class=\"nav-link\">登录</router-link>\n            </li>\n            <li class=\"nav-item\" v-if=\"!isLoggedIn\">\n              <router-link to=\"/register\" class=\"nav-link\">注册</router-link>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </nav>\n    \n    <!-- 主要内容 -->\n    <div class=\"container mt-4\">\n      <router-view />\n    </div>\n    \n    <!-- 页脚 -->\n    <footer class=\"bg-light py-3 mt-4\">\n      <div class=\"container text-center\">\n        <p class=\"mb-0\">© 2023 校内二手市场. 保留所有权利.</p>\n      </div>\n    </footer>\n  </div>\n</template>\n\n<script>\nimport axios from './axios';\n\nexport default {\n  data() {\n    return {\n      isLoggedIn: false,\n      currentUser: {}\n    };\n  },\n  mounted() {\n    // 检查登录状态\n    this.checkLoginStatus();\n  },\n  methods: {\n    async checkLoginStatus() {\n      const token = localStorage.getItem('access_token');\n      if (token) {\n        this.isLoggedIn = true;\n        this.getUserInfo();\n      } else {\n        this.isLoggedIn = false;\n        this.currentUser = {};\n      }\n    },\n    async getUserInfo() {\n      try {\n        const res = await axios.get('/auth/me');\n        if (res.ok) {\n          this.currentUser = res.data;\n        }\n      } catch (error) {\n        console.error('获取用户信息失败', error);\n        localStorage.removeItem('access_token');\n        this.isLoggedIn = false;\n      }\n    },\n    async logout() {\n      try {\n        await axios.post('/auth/logout');\n      } catch (error) {\n        console.error('登出失败', error);\n      } finally {\n        localStorage.removeItem('access_token');\n        this.isLoggedIn = false;\n        this.currentUser = {};\n        this.$router.push('/');\n      }\n    }\n  }\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n\n.navbar {\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.nav-link {\n  cursor: pointer;\n}\n\nfooter {\n  margin-top: auto;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}