{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, withModifiers as _withModifiers, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"text-center py-5\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"text-center py-5\"\n};\nconst _hoisted_4 = {\n  key: 2,\n  class: \"row\"\n};\nconst _hoisted_5 = {\n  class: \"card item-card position-relative\"\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = [\"src\", \"alt\"];\nconst _hoisted_8 = {\n  class: \"card-body\"\n};\nconst _hoisted_9 = {\n  class: \"card-title\"\n};\nconst _hoisted_10 = {\n  class: \"card-text text-danger font-weight-bold\"\n};\nconst _hoisted_11 = {\n  class: \"card-text\"\n};\nconst _hoisted_12 = {\n  class: \"card-text text-muted\",\n  style: {\n    \"font-size\": \"0.9rem\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 加载中提示 \"), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [...(_cache[0] || (_cache[0] = [_createElementVNode(\"div\", {\n    class: \"spinner-border text-primary\",\n    role: \"status\"\n  }, [_createElementVNode(\"span\", {\n    class: \"visually-hidden\"\n  }, \"Loading...\")], -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 收藏列表标题 \"), _cache[5] || (_cache[5] = _createElementVNode(\"h2\", {\n    class: \"my-4\"\n  }, \"我的收藏\", -1 /* CACHED */)), _createCommentVNode(\" 没有收藏时显示 \"), !$data.loading && $data.favorites.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_cache[2] || (_cache[2] = _createElementVNode(\"p\", {\n    class: \"text-muted\"\n  }, \"你还没有收藏任何商品\", -1 /* CACHED */)), _createVNode(_component_router_link, {\n    to: \"/\",\n    class: \"btn btn-primary\"\n  }, {\n    default: _withCtx(() => [...(_cache[1] || (_cache[1] = [_createTextVNode(\"去逛逛\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 收藏列表 \"), !$data.loading && $data.favorites.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.favorites, item => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"col-md-4 mb-4\",\n      key: item.id\n    }, [_createElementVNode(\"div\", _hoisted_5, [_createCommentVNode(\" 取消收藏按钮（悬浮显示） \"), _createElementVNode(\"button\", {\n      class: \"btn btn-danger rounded-circle position-absolute top-2 right-2\",\n      style: {\n        \"width\": \"30px\",\n        \"height\": \"30px\",\n        \"padding\": \"0\",\n        \"display\": \"none\"\n      },\n      onClick: _withModifiers($event => $options.removeFavorite(item.id), [\"stop\"])\n    }, [...(_cache[3] || (_cache[3] = [_createElementVNode(\"i\", {\n      class: \"bi bi-x\"\n    }, null, -1 /* CACHED */)]))], 8 /* PROPS */, _hoisted_6), _createCommentVNode(\" 商品图片 \"), _createElementVNode(\"img\", {\n      src: item.imagePath ? `/images/${item.imagePath}` : '/images/default.jpg',\n      class: \"card-img-top item-image\",\n      alt: item.title\n    }, null, 8 /* PROPS */, _hoisted_7), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h5\", _hoisted_9, _toDisplayString(item.title), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_10, \"¥\" + _toDisplayString(item.price), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_11, [_createElementVNode(\"span\", {\n      class: _normalizeClass([\"badge\", item.status === 'available' ? 'bg-success' : 'bg-secondary'])\n    }, _toDisplayString(item.status === 'available' ? '可交易' : '已售出'), 3 /* TEXT, CLASS */)]), _createElementVNode(\"p\", _hoisted_12, \" 卖家：\" + _toDisplayString(item.seller.username), 1 /* TEXT */), _createVNode(_component_router_link, {\n      to: `/item/${item.id}`,\n      class: \"btn btn-primary w-100\"\n    }, {\n      default: _withCtx(() => [...(_cache[4] || (_cache[4] = [_createTextVNode(\"查看详情\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"to\"])])])]);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createCommentVNode","$data","loading","_hoisted_2","_cache","_createElementVNode","role","favorites","length","_hoisted_3","_createVNode","_component_router_link","to","_hoisted_4","_Fragment","_renderList","item","key","id","_hoisted_5","onClick","_withModifiers","$event","$options","removeFavorite","src","imagePath","alt","title","_hoisted_8","_hoisted_9","_toDisplayString","_hoisted_10","price","_hoisted_11","_normalizeClass","status","_hoisted_12","seller","username"],"sources":["D:\\21626\\MyFiles\\files\\2025fall\\SE\\Vue_2\\frontend\\src\\views\\Favorites.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- 加载中提示 -->\n    <div v-if=\"loading\" class=\"text-center py-5\">\n      <div class=\"spinner-border text-primary\" role=\"status\">\n        <span class=\"visually-hidden\">Loading...</span>\n      </div>\n    </div>\n\n    <!-- 收藏列表标题 -->\n    <h2 class=\"my-4\">我的收藏</h2>\n\n    <!-- 没有收藏时显示 -->\n    <div v-if=\"!loading && favorites.length === 0\" class=\"text-center py-5\">\n      <p class=\"text-muted\">你还没有收藏任何商品</p>\n      <router-link to=\"/\" class=\"btn btn-primary\">去逛逛</router-link>\n    </div>\n\n    <!-- 收藏列表 -->\n    <div class=\"row\" v-if=\"!loading && favorites.length > 0\">\n      <div class=\"col-md-4 mb-4\" v-for=\"item in favorites\" :key=\"item.id\">\n        <div class=\"card item-card position-relative\">\n          <!-- 取消收藏按钮（悬浮显示） -->\n          <button \n            class=\"btn btn-danger rounded-circle position-absolute top-2 right-2\"\n            style=\"width: 30px; height: 30px; padding: 0; display: none;\"\n            @click.stop=\"removeFavorite(item.id)\"\n          >\n            <i class=\"bi bi-x\"></i>\n          </button>\n\n          <!-- 商品图片 -->\n          <img \n            :src=\"item.imagePath ? `/images/${item.imagePath}` : '/images/default.jpg'\" \n            class=\"card-img-top item-image\" \n            :alt=\"item.title\"\n          >\n          \n          <div class=\"card-body\">\n            <h5 class=\"card-title\">{{ item.title }}</h5>\n            <p class=\"card-text text-danger font-weight-bold\">¥{{ item.price }}</p>\n            <p class=\"card-text\">\n              <span class=\"badge\" :class=\"item.status === 'available' ? 'bg-success' : 'bg-secondary'\">\n                {{ item.status === 'available' ? '可交易' : '已售出' }}\n              </span>\n            </p>\n            <p class=\"card-text text-muted\" style=\"font-size: 0.9rem;\">\n              卖家：{{ item.seller.username }}\n            </p>\n            <router-link :to=\"`/item/${item.id}`\" class=\"btn btn-primary w-100\">查看详情</router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  data() {\n    return {\n      loading: true,       // 加载状态\n      favorites: []        // 收藏列表数据\n    }\n  },\n  created() {\n    // 页面加载时获取收藏列表\n    this.getFavorites();\n  },\n  mounted() {\n    // 实现鼠标悬停显示“取消收藏”按钮\n    const cards = document.querySelectorAll('.item-card');\n    cards.forEach(card => {\n      card.addEventListener('mouseenter', () => {\n        card.querySelector('button').style.display = 'flex';\n      });\n      card.addEventListener('mouseleave', () => {\n        card.querySelector('button').style.display = 'none';\n      });\n    });\n  },\n  methods: {\n    // 获取收藏列表\n    async getFavorites() {\n      try {\n        // 调用后端接口获取收藏列表\n        const response = await axios.get('/api/favorites');\n        if (response.data.ok) {\n          this.favorites = response.data.data;\n        } else {\n          alert(response.data.message || '获取收藏列表失败');\n        }\n      } catch (error) {\n        console.error('获取收藏列表失败:', error);\n        // 后端接口未实现时，用模拟数据显示\n        this.favorites = [\n          {\n            id: 1,\n            title: '收藏的商品1',\n            price: 150,\n            imagePath: 'default.jpg',\n            status: 'available',\n            seller: { username: '卖家A' }\n          },\n          {\n            id: 2,\n            title: '收藏的商品2',\n            price: 300,\n            imagePath: '',\n            status: 'available',\n            seller: { username: '卖家B' }\n          }\n        ];\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    // 取消收藏\n    async removeFavorite(itemId) {\n      if (!confirm('确定要取消收藏这个商品吗？')) {\n        return;\n      }\n\n      try {\n        // 调用后端接口取消收藏\n        const response = await axios.delete(`/api/favorites/${itemId}`);\n        if (response.data.ok) {\n          alert('取消收藏成功');\n          // 重新获取收藏列表\n          this.getFavorites();\n        } else {\n          alert(response.data.message || '取消收藏失败');\n        }\n      } catch (error) {\n        console.error('取消收藏失败:', error);\n        alert('网络错误，请稍后再试');\n      }\n    }\n  }\n}\n</script>\n\n<style>\n/* 取消收藏按钮样式优化 */\n.item-card button {\n  align-items: center;\n  justify-content: center;\n  opacity: 0.8;\n  z-index: 10;\n}\n.item-card button:hover {\n  opacity: 1;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}