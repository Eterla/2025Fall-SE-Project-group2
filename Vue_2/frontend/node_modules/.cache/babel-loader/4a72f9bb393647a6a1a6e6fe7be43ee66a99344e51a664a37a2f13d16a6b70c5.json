{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, vModelText as _vModelText, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"search-bar my-4\"\n};\nconst _hoisted_3 = {\n  class: \"input-group\"\n};\nconst _hoisted_4 = {\n  class: \"mb-4\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"row\"\n};\nconst _hoisted_6 = {\n  class: \"card item-card\"\n};\nconst _hoisted_7 = [\"src\", \"alt\"];\nconst _hoisted_8 = {\n  class: \"card-body\"\n};\nconst _hoisted_9 = {\n  class: \"card-title\"\n};\nconst _hoisted_10 = {\n  class: \"card-text text-danger font-weight-bold\"\n};\nconst _hoisted_11 = {\n  class: \"card-text text-muted\"\n};\nconst _hoisted_12 = {\n  key: 1,\n  class: \"alert alert-info\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 搜索框 \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchQuery = $event),\n    onKeyup: _cache[1] || (_cache[1] = _withKeys((...args) => $options.search && $options.search(...args), [\"enter\"])),\n    placeholder: \"搜索商品...\",\n    class: \"form-control\"\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $data.searchQuery]]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.search && $options.search(...args)),\n    class: \"btn btn-primary\"\n  }, \"搜索\")])]), _createCommentVNode(\" 商品列表 \"), _createElementVNode(\"h2\", _hoisted_4, _toDisplayString($data.searchQuery ? `搜索结果: ${$data.searchQuery}` : '最新商品'), 1 /* TEXT */), $data.items.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.items, item => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"col-md-4 mb-4\",\n      key: item.id\n    }, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"img\", {\n      src: item.image_path ? `/static/${item.image_path}` : '/static/images/default.jpg',\n      class: \"card-img-top item-image\",\n      alt: item.title\n    }, null, 8 /* PROPS */, _hoisted_7), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h5\", _hoisted_9, _toDisplayString(item.title), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_10, \"¥\" + _toDisplayString(item.price), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_11, _toDisplayString($options.formatDate(item.created_at)), 1 /* TEXT */), _createVNode(_component_router_link, {\n      to: {\n        name: 'ItemDetail',\n        params: {\n          id: item.id\n        }\n      },\n      class: \"btn btn-primary w-100\"\n    }, {\n      default: _withCtx(() => [...(_cache[3] || (_cache[3] = [_createTextVNode(\" 查看详情 \", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"to\"])])])]);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_12, _toDisplayString($data.searchQuery ? '没有找到相关商品' : '暂无商品'), 1 /* TEXT */))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","type","$data","searchQuery","$event","onKeyup","_cache","_withKeys","args","$options","search","placeholder","onClick","_hoisted_4","_toDisplayString","items","length","_hoisted_5","_Fragment","_renderList","item","key","id","_hoisted_6","src","image_path","alt","title","_hoisted_8","_hoisted_9","_hoisted_10","price","_hoisted_11","formatDate","created_at","_createVNode","_component_router_link","to","name","params","_hoisted_12"],"sources":["D:\\21626\\MyFiles\\files\\2025fall\\SE\\Vue_2\\frontend\\src\\views\\Home.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- 搜索框 -->\n    <div class=\"search-bar my-4\">\n      <div class=\"input-group\">\n        <input \n          type=\"text\" \n          v-model=\"searchQuery\" \n          @keyup.enter=\"search\"\n          placeholder=\"搜索商品...\"\n          class=\"form-control\"\n        >\n        <button @click=\"search\" class=\"btn btn-primary\">搜索</button>\n      </div>\n    </div>\n\n    <!-- 商品列表 -->\n    <h2 class=\"mb-4\">{{ searchQuery ? `搜索结果: ${searchQuery}` : '最新商品' }}</h2>\n    \n    <div class=\"row\" v-if=\"items.length > 0\">\n      <div class=\"col-md-4 mb-4\" v-for=\"item in items\" :key=\"item.id\">\n        <div class=\"card item-card\">\n          <img \n            :src=\"item.image_path ? `/static/${item.image_path}` : '/static/images/default.jpg'\" \n            class=\"card-img-top item-image\" \n            :alt=\"item.title\"\n          >\n          <div class=\"card-body\">\n            <h5 class=\"card-title\">{{ item.title }}</h5>\n            <p class=\"card-text text-danger font-weight-bold\">¥{{ item.price }}</p>\n            <p class=\"card-text text-muted\">{{ formatDate(item.created_at) }}</p>\n            <router-link \n              :to=\"{ name: 'ItemDetail', params: { id: item.id } }\" \n              class=\"btn btn-primary w-100\"\n            >\n              查看详情\n            </router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <div class=\"alert alert-info\" v-else>\n      {{ searchQuery ? '没有找到相关商品' : '暂无商品' }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from '../axios';\n\nexport default {\n  data() {\n    return {\n      items: [],\n      searchQuery: ''\n    };\n  },\n  mounted() {\n    this.loadItems();\n  },\n  methods: {\n    async loadItems() {\n      try {\n        const res = await axios.get('/items', {\n          params: { search: this.searchQuery }\n        });\n        if (res.ok) {\n          this.items = res.data;\n        }\n      } catch (error) {\n        console.error('加载商品失败', error);\n        this.$alert('加载商品失败，请稍后重试', '错误', {\n          confirmButtonText: '确定'\n        });\n      }\n    },\n    search() {\n      this.loadItems();\n    },\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleDateString();\n    }\n  }\n};\n</script>\n\n<style scoped>\n.item-card {\n  transition: transform 0.2s;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.item-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n.item-image {\n  height: 200px;\n  object-fit: cover;\n}\n.card-body {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n.card-title {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.search-bar {\n  margin-bottom: 20px;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EAEfA,KAAK,EAAC;AAAiB;;EACrBA,KAAK,EAAC;AAAa;;EAatBA,KAAK,EAAC;AAAM;;;EAEXA,KAAK,EAAC;;;EAEFA,KAAK,EAAC;AAAgB;;;EAMpBA,KAAK,EAAC;AAAW;;EAChBA,KAAK,EAAC;AAAY;;EACnBA,KAAK,EAAC;AAAwC;;EAC9CA,KAAK,EAAC;AAAsB;;;EAYlCA,KAAK,EAAC;;;;uBAzCbC,mBAAA,CA4CM,OA5CNC,UA4CM,GA3CJC,mBAAA,SAAY,EACZC,mBAAA,CAWM,OAXNC,UAWM,GAVJD,mBAAA,CASM,OATNE,UASM,G,gBARJF,mBAAA,CAMC;IALCG,IAAI,EAAC,MAAM;+DACFC,KAAA,CAAAC,WAAW,GAAAC,MAAA;IACnBC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,SAAA,KAAAC,IAAA,KAAQC,QAAA,CAAAC,MAAA,IAAAD,QAAA,CAAAC,MAAA,IAAAF,IAAA,CAAM;IACpBG,WAAW,EAAC,SAAS;IACrBjB,KAAK,EAAC;iEAHGQ,KAAA,CAAAC,WAAW,E,GAKtBL,mBAAA,CAA2D;IAAlDc,OAAK,EAAAN,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAC,MAAA,IAAAD,QAAA,CAAAC,MAAA,IAAAF,IAAA,CAAM;IAAEd,KAAK,EAAC;KAAkB,IAAE,E,KAItDG,mBAAA,UAAa,EACbC,mBAAA,CAAyE,MAAzEe,UAAyE,EAAAC,gBAAA,CAArDZ,KAAA,CAAAC,WAAW,YAAYD,KAAA,CAAAC,WAAW,6BAE/BD,KAAA,CAAAa,KAAK,CAACC,MAAM,Q,cAAnCrB,mBAAA,CAqBM,OArBNsB,UAqBM,I,kBApBJtB,mBAAA,CAmBMuB,SAAA,QAAAC,WAAA,CAnBoCjB,KAAA,CAAAa,KAAK,EAAbK,IAAI;yBAAtCzB,mBAAA,CAmBM;MAnBDD,KAAK,EAAC,eAAe;MAAwB2B,GAAG,EAAED,IAAI,CAACE;QAC1DxB,mBAAA,CAiBM,OAjBNyB,UAiBM,GAhBJzB,mBAAA,CAIC;MAHE0B,GAAG,EAAEJ,IAAI,CAACK,UAAU,cAAcL,IAAI,CAACK,UAAU;MAClD/B,KAAK,EAAC,yBAAyB;MAC9BgC,GAAG,EAAEN,IAAI,CAACO;yCAEb7B,mBAAA,CAUM,OAVN8B,UAUM,GATJ9B,mBAAA,CAA4C,MAA5C+B,UAA4C,EAAAf,gBAAA,CAAlBM,IAAI,CAACO,KAAK,kBACpC7B,mBAAA,CAAuE,KAAvEgC,WAAuE,EAArB,GAAC,GAAAhB,gBAAA,CAAGM,IAAI,CAACW,KAAK,kBAChEjC,mBAAA,CAAqE,KAArEkC,WAAqE,EAAAlB,gBAAA,CAAlCL,QAAA,CAAAwB,UAAU,CAACb,IAAI,CAACc,UAAU,mBAC7DC,YAAA,CAKcC,sBAAA;MAJXC,EAAE;QAAAC,IAAA;QAAAC,MAAA;UAAAjB,EAAA,EAAsCF,IAAI,CAACE;QAAE;MAAA;MAChD5B,KAAK,EAAC;;wBACP,MAED,KAAAY,MAAA,QAAAA,MAAA,O,iBAFC,QAED,mB;;;qDAMRX,mBAAA,CAEM,OAFN6C,WAEM,EAAA1B,gBAAA,CADDZ,KAAA,CAAAC,WAAW,wC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}