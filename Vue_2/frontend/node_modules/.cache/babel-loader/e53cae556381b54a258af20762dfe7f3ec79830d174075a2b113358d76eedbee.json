{"ast":null,"code":"import axios from '../axios';\nexport default {\n  data() {\n    return {\n      items: [],\n      searchQuery: ''\n    };\n  },\n  mounted() {\n    this.loadItems();\n  },\n  methods: {\n    async loadItems() {\n      try {\n        const res = await axios.get('/items', {\n          params: {\n            search: this.searchQuery\n          }\n        });\n        if (res.ok) {\n          this.items = res.data;\n        }\n      } catch (error) {\n        console.error('加载商品失败', error);\n        this.$alert('加载商品失败，请稍后重试', '错误', {\n          confirmButtonText: '确定'\n        });\n      }\n    },\n    search() {\n      this.loadItems();\n    },\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleDateString();\n    }\n  }\n};","map":{"version":3,"names":["axios","data","items","searchQuery","mounted","loadItems","methods","res","get","params","search","ok","error","console","$alert","confirmButtonText","formatDate","dateString","date","Date","toLocaleDateString"],"sources":["D:\\21626\\MyFiles\\files\\2025fall\\SE\\Vue_2\\frontend\\src\\views\\Home.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- 搜索框 -->\n    <div class=\"search-bar my-4\">\n      <div class=\"input-group\">\n        <input \n          type=\"text\" \n          v-model=\"searchQuery\" \n          @keyup.enter=\"search\"\n          placeholder=\"搜索商品...\"\n          class=\"form-control\"\n        >\n        <button @click=\"search\" class=\"btn btn-primary\">搜索</button>\n      </div>\n    </div>\n\n    <!-- 商品列表 -->\n    <h2 class=\"mb-4\">{{ searchQuery ? `搜索结果: ${searchQuery}` : '最新商品' }}</h2>\n    \n    <div class=\"row\" v-if=\"items.length > 0\">\n      <div class=\"col-md-4 mb-4\" v-for=\"item in items\" :key=\"item.id\">\n        <div class=\"card item-card\">\n          <img \n            :src=\"item.image_path ? `/static/${item.image_path}` : '/static/images/default.jpg'\" \n            class=\"card-img-top item-image\" \n            :alt=\"item.title\"\n          >\n          <div class=\"card-body\">\n            <h5 class=\"card-title\">{{ item.title }}</h5>\n            <p class=\"card-text text-danger font-weight-bold\">¥{{ item.price }}</p>\n            <p class=\"card-text text-muted\">{{ formatDate(item.created_at) }}</p>\n            <router-link \n              :to=\"{ name: 'ItemDetail', params: { id: item.id } }\" \n              class=\"btn btn-primary w-100\"\n            >\n              查看详情\n            </router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <div class=\"alert alert-info\" v-else>\n      {{ searchQuery ? '没有找到相关商品' : '暂无商品' }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from '../axios';\n\nexport default {\n  data() {\n    return {\n      items: [],\n      searchQuery: ''\n    };\n  },\n  mounted() {\n    this.loadItems();\n  },\n  methods: {\n    async loadItems() {\n      try {\n        const res = await axios.get('/items', {\n          params: { search: this.searchQuery }\n        });\n        if (res.ok) {\n          this.items = res.data;\n        }\n      } catch (error) {\n        console.error('加载商品失败', error);\n        this.$alert('加载商品失败，请稍后重试', '错误', {\n          confirmButtonText: '确定'\n        });\n      }\n    },\n    search() {\n      this.loadItems();\n    },\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleDateString();\n    }\n  }\n};\n</script>\n\n<style scoped>\n.item-card {\n  transition: transform 0.2s;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.item-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n.item-image {\n  height: 200px;\n  object-fit: cover;\n}\n.card-body {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n.card-title {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.search-bar {\n  margin-bottom: 20px;\n}\n</style>\n"],"mappings":"AAiDA,OAAOA,KAAI,MAAO,UAAU;AAE5B,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,WAAW,EAAE;IACf,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,SAAS,CAAC,CAAC;EAClB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,SAASA,CAAA,EAAG;MAChB,IAAI;QACF,MAAME,GAAE,GAAI,MAAMP,KAAK,CAACQ,GAAG,CAAC,QAAQ,EAAE;UACpCC,MAAM,EAAE;YAAEC,MAAM,EAAE,IAAI,CAACP;UAAY;QACrC,CAAC,CAAC;QACF,IAAII,GAAG,CAACI,EAAE,EAAE;UACV,IAAI,CAACT,KAAI,GAAIK,GAAG,CAACN,IAAI;QACvB;MACF,EAAE,OAAOW,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;QAC9B,IAAI,CAACE,MAAM,CAAC,cAAc,EAAE,IAAI,EAAE;UAChCC,iBAAiB,EAAE;QACrB,CAAC,CAAC;MACJ;IACF,CAAC;IACDL,MAAMA,CAAA,EAAG;MACP,IAAI,CAACL,SAAS,CAAC,CAAC;IAClB,CAAC;IACDW,UAAUA,CAACC,UAAU,EAAE;MACrB,IAAI,CAACA,UAAU,EAAE,OAAO,EAAE;MAC1B,MAAMC,IAAG,GAAI,IAAIC,IAAI,CAACF,UAAU,CAAC;MACjC,OAAOC,IAAI,CAACE,kBAAkB,CAAC,CAAC;IAClC;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}